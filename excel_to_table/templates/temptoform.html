{%load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    
    <title>Excel Reader</title>
    

    
</head>
<body>
    {% include "header.html" %}
    <div class="container-fluid bg-white">
        <h1 class="text-white">Excel Data</h1>
        <form  id="formEdit" method="POST">
          {% csrf_token %}
          <button id="updated_btn" type="button" class="btn btn-outline-info text-center">SUBMIT</button>
          <a href="{% url 'selectform'  %}" class="btn btn-primary">NEXT</i></a>

          <table class="table table-striped" id="myTable">
            <thead>
              <tr>
                <th scope="col">Sr.no</th>
                <th scope="col">step</th>
                <th scope="col">Description</th>
                <th scope="col">std.value</th>
                <th scope="col">obs.value</th>
                <th scope="col">start_time</th>
                <th scope="col">end_time</th>
                <th scope="col">created_by</th>
                <!-- <th scope="col">user_permission</th> -->
              </tr>
            </thead>
            <tbody>
              {% for data in edittemplate %}
              <tr>
                <input type="hidden" value="{{data.id}}" name="id[]">

                <td>{{ forloop.counter }}</td>
                <td>{{ data.step }}</td>
                <td>{{ data.description }}</td>
                <td><input type="text" id="updated_level_code" value="{{data.std_value}}" name="std_value[]" class="level-code" onchange="checkFilled();">
                  <p id="outputParagraph"></p>
                </td>
                <td>{{ data.obs_value }}</td>
                <td>{{ data.start_time }}</td>
                <td>{{ data.end_time }}</td>
                <td>{{ data.creator }}</td>
                <!-- <td style="width: 10%;">
                  <img src="/static/images/u.png" alt="#" height="25%" width="25%" style="margin-right: 10px;"/>
                  <img src="/static/images/d.png" alt="#" height="25%" width="25%"/>
                </td> -->
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </form>
    </div>
    
    <script src="{% static 'js/xlsx.full.min.js' %}"></script> 
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.js' %}"></script>
    <script src="{% static 'js/fontawesome.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
    <script>
      $(document).ready(function(){
      $("input").on("input", function(){
        // Display the fixed text with the name "Shivam" when the user types
        $("#outputParagraph").text("Getting updated by Shivam");
      });
    });

      $(document).ready(function () {
    $(".level-code").on("input", function () {
      var inputValue = parseInt($(this).val());

      if (inputValue < 50) {
        $(this).css("background-color", "yellow");
      } else if (inputValue >= 50 && inputValue <= 60) {
        $(this).css("background-color", "green");
      } else if (inputValue > 60) {
        $(this).css("background-color", "red");
      } else {
        // Default color if input is not a number
        $(this).css("background-color", "");
      }
    });
  });
      $(document).ready(function () {
          $("#updated_btn").click(function (event) {
              event.preventDefault();
              $.ajax({
                  type: "POST",
                  url: "/updatelc/",
                  data: $("#formEdit").serialize(),
                  success: function () {
                      alert("Form saved");
                      // $('#message').html("<h2>Contact Form Submitted!</h2>")
                  }
              });
              return false;
          });
      });

  </script>
</body>
</html>
